pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	t = 0
	p_ani = { 240, 241, 242, 243 }
	_upd = update_game
	_drw = draw_game
	startgame()
end

function _update()
	t += 1
	_upd()
end

function _draw()
	_drw()
end

function startgame()
	p_x = 2
	p_y = 6
	p_ox = 0
	p_oy = 0
end

-->8
--updates

function update_game()
	if btnp(⬅️) then
		p_x -= 1
		p_ox = 8
		_upd = update_pturn
	end
	if btnp(➡️) then
		p_x += 1
		p_ox = -8
		_upd = update_pturn
	end
	if btnp(⬆️) then
		p_y -= 1
		p_oy = 8
		_upd = update_pturn
	end
	if btnp(⬇️) then
		p_y += 1
		p_oy = -8
		_upd = update_pturn
	end
end

function update_pturn()
	if p_ox > 0 then
		p_ox -= 1
	end
	if p_ox < 0 then
		p_ox += 1
	end
	if p_oy > 0 then
		p_oy -= 1
	end
	if p_oy < 0 then
		p_oy += 1
	end
	if p_ox == 0 and p_oy == 0 then
		_upd = update_game
	end
end

function update_gameover()
end

-->8
--draws

function draw_game()
	cls(0)
	map()

	drawspr(getframe(p_ani), p_x * 8 + p_ox, p_y * 8 + p_oy, 10)
end

function draw_gameover()
end

-->8
--tools

function getframe(_ani)
	return _ani[flr(t / 8) % #_ani + 1]
end

function drawspr(_spr, _x, _y, _c)
	palt(0, false)
	pal(6, _c)
	spr(_spr, _x, _y)
	pal()
end

__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002020101010101010e02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002020101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002010101010101010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002010101010101010202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020f0101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
